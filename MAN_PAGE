.TH _SIMPLE_SHELL 3 "Décembre 2025" "Projet Holberton" "Manuel utilisateur"

.SH NAME
hsh \- Interpréteur de commandes UNIX minimal en C.

.SH SYNOPSIS
#include "shell.h"

int main(int ac, char **av, char **env);

.SH DESCRIPTION
Le programme \fBhsh\fR est un interpréteur de commandes UNIX simplifié.
Il affiche un prompt en mode interactif, lit une commande sur l'entrée standard,
crée un processus enfant et tente d'exécuter l'exécutable correspondant
via l'appel système \fBexecve(2)\fR, en lui transmettant l'environnement.

C'est une version volontairement minimale d'un shell, conçue dans le cadre
d'un projet de programmation système.

.SS Fonctionnement
À chaque itération, le shell :
.TP
1. Affiche un prompt (uniquement si l'entrée standard est un terminal).
.TP
2. Lit une ligne de commande (terminée par un saut de ligne).
.TP
3. Crée un processus enfant avec \fBfork(2)\fR.
.TP
4. Exécute la commande dans l’enfant avec \fBexecve(2)\fR.
.TP
5. Attend la fin du processus enfant dans le parent avec \fBwaitpid(2)\fR.
.TP
6. Réaffiche le prompt après exécution (réussie ou non).

.SS Gestion des erreurs
Le shell gère notamment :
.IP \(bu 2
Commande introuvable (chemin invalide ou fichier inexistant).
.IP \(bu 2
Échec de création de processus (\fBfork()\fR).
.IP \(bu 2
Permissions insuffisantes (\fBX_OK\fR requis pour exécuter le programme).

Si l’exécutable ne peut pas être lancé, un message d’erreur est affiché
et le shell continue son exécution.

.SH RETURN VALUE
Le programme se termine avec le code :
.TP
\fB0\fR
Si la sortie provient d’un EOF (Ctrl+D) ou d’une fin normale.
.PP
Le code de retour des commandes exécutées n’est pas récupéré pour être
réutilisé dans le shell.

.SH EXAMPLES
.nf
#include "shell.h"

int main(void)
{
    /* Lancer le shell en mode interactif */
    system("./hsh");

    /* Exemple d’exécution valide */
    /* Saisie utilisateur : /bin/pwd */
    /* Sortie attendue : (chemin du répertoire courant) */

    /* Exemple d’exécution invalide */
    /* Saisie utilisateur : ls */
    /* Sortie attendue : ./hsh: No such file or directory */

    return (0);
}
.fi

.SH NOTES
Cette implémentation ne gère pas :
.IP \(bu 2
La résolution automatique via \fBPATH\fR (aucun argument accepté sans chemin).
.IP \(bu 2
Les built-ins (\fBcd\fR, \fBexit\fR, \fBenv\fR, etc.).
.IP \(bu 2
Les redirections, pipes, séparateurs ou expansions de caractères spéciaux.
.IP \(bu 2
Le déplacement du curseur ou l’interception des touches clavier (flèches, etc.).
.IP \(bu 2
Les commandes avec arguments multiples.

Ce shell n’est pas destiné à un usage en production et reste un programme
pédagogique.

.SH AUTHORS
Pawnee et Anthony
.SH BUGS
Programme volontairement limité. Les séquences d’échappement clavier sont
lues comme du texte brut et peuvent provoquer des erreurs d’exécution,
ce qui est cohérent avec le comportement attendu d’un shell minimal.
